{% extends "store/base.html" %}
{% load static %}

{% block title %}The Clubhouse - Home{% endblock %}

{% block content %}
    <main class="homepage">
        <section class="hero">
            <div class="hero-inner container">
                <div class="hero-copy">
                    <h1 class="hero-title">QUALITY<br>REFURBISHED<br>GOLF CLUBS</h1>
                    <p class="hero-sub">A better way to play</p>
                    <a class="btn btn-primary hero-cta" href="#categories">SHOP NOW</a>
                </div>
                <div class="hero-image">
                    {% comment %} Prefer a featured driver image if available, else fall back to a static image {% endcomment %}
                    {% if featured_products.driver and featured_products.driver.0 %}
                        <img src="{{ featured_products.driver.0.image.url }}" alt="Driver" loading="lazy">
                    {% else %}
                        <img src="{% static 'store/images/hero-driver.png' %}" alt="Driver" loading="lazy">
                    {% endif %}
                </div>
            </div>
        </section>

    <section id="categories" class="categories container">
            <h2 class="section-title">SHOP BY CATEGORY</h2>
            <div class="category-grid">
                <!-- Order: drivers, woods, hybrids, irons, wedges, putters -->
                <a class="category-card" href="{% url 'product_category' 'driver' %}">
                    {% if featured_products.driver and featured_products.driver.0 %}
                        <img src="{{ featured_products.driver.0.image.url }}" alt="Drivers">
                    {% else %}
                        <img src="{% static 'store/images/category-drivers.svg' %}" alt="Drivers">
                    {% endif %}
                    <span class="category-label">Drivers</span>
                </a>

                <a class="category-card" href="{% url 'product_category' 'wood' %}">
                    {% if featured_products.wood and featured_products.wood.0 %}
                        <img src="{{ featured_products.wood.0.image.url }}" alt="Woods">
                    {% else %}
                        <img src="{% static 'store/images/category-woods.svg' %}" alt="Woods">
                    {% endif %}
                    <span class="category-label">Woods</span>
                </a>

                <a class="category-card" href="{% url 'product_category' 'hybrid' %}">
                    {% if featured_products.hybrid and featured_products.hybrid.0 %}
                        <img src="{{ featured_products.hybrid.0.image.url }}" alt="Hybrids">
                    {% else %}
                        <img src="{% static 'store/images/category-hybrids.svg' %}" alt="Hybrids">
                    {% endif %}
                    <span class="category-label">Hybrids</span>
                </a>

                <a class="category-card" href="{% url 'product_category' 'iron' %}">
                    {% if featured_products.iron and featured_products.iron.0 %}
                        <img src="{{ featured_products.iron.0.image.url }}" alt="Irons">
                    {% else %}
                        <img src="{% static 'store/images/category-irons.svg' %}" alt="Irons">
                    {% endif %}
                    <span class="category-label">Irons</span>
                </a>

                <a class="category-card" href="{% url 'product_category' 'wedge' %}">
                    {% if featured_products.wedge and featured_products.wedge.0 %}
                        <img src="{{ featured_products.wedge.0.image.url }}" alt="Wedges">
                    {% else %}
                        <img src="{% static 'store/images/category-wedges.svg' %}" alt="Wedges">
                    {% endif %}
                    <span class="category-label">Wedges</span>
                </a>

                <a class="category-card" href="{% url 'product_category' 'putter' %}">
                    {% if featured_products.putter and featured_products.putter.0 %}
                        <img src="{{ featured_products.putter.0.image.url }}" alt="Putters">
                    {% else %}
                        <img src="{% static 'store/images/category-putters.svg' %}" alt="Putters">
                    {% endif %}
                    <span class="category-label">Putters</span>
                </a>
            </div>
        </section>
    </main>
{% endblock %}

{% block extra_scripts %}
    <script src="{% static 'store/js/homepage.js' %}" defer></script>
{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'store/css/homepage.css' %}">
    <style>
        /* Inline fallback: collapse content but allow a smooth reveal even if external CSS is cached */
        .homepage .product-card .product-price,
        .homepage .product-card .product-description {
            max-height: 0 !important;
            opacity: 0 !important;
            overflow: hidden !important;
            transform: translateY(-6px) !important;
            /* slightly slower initial reveal: longer fade & slide durations */
            transition: max-height .6s cubic-bezier(.2,.8,.2,1), opacity .5s ease, transform .7s cubic-bezier(.2,.8,.2,1) !important;
            display: block !important;
        }
        /* Reveal on hover (inline fallback) */
        .homepage .product-card:hover .product-price,
        .homepage .product-card:hover .product-description {
            max-height: 1000px !important;
            opacity: 1 !important;
            transform: translateY(0) !important;
            /* shorter transitions while hovered so collapse is quicker */
            transition: max-height .28s ease, opacity .18s ease, transform .18s ease !important;
        }
        /* Make login/register links in the header white on the homepage */
        .nav-right > a { color: #fff !important; font-weight: 700; }
        .nav-right > a:hover { text-decoration: underline; }

        /* Give the main homepage container rounded corners and clip its contents */
        .homepage { border-radius: 25px; overflow: hidden; }
    </style>
{% endblock %}
