{% extends 'store/base.html' %}
{% load static %}

{% block title %}Your Cart{% endblock %}

{% block content %}
    <h1>Your Cart</h1>

    {% if order %}
        <ul>
            {% for item in order.items.all %}
                <li id="cart-item-{{ item.product.id }}">
                    {{ item.product.name }} - ${{ item.product.price }} x <span class="item-qty">{{ item.quantity }}</span>
                    <form class="remove-form" method="post" action="{% url 'remove_from_cart' item.product.id %}" style="display:inline; margin-left:10px;">
                        {% csrf_token %}
                        <button type="submit" class="remove-btn" style="background:none;border:none;color:#c00;cursor:pointer;">Remove</button>
                    </form>
                    <form class="remove-all-form" method="post" action="{% url 'remove_all_from_cart' item.product.id %}" style="display:inline; margin-left:6px;">
                        {% csrf_token %}
                        <button type="submit" class="remove-all-btn" style="background:none;border:none;color:#900;cursor:pointer;">Remove all</button>
                    </form>
                </li>
            {% endfor %}
        </ul>
        <p>Total: $<span id="order-total">{{ order.total_price }}</span></p>
        <a href="{% url 'checkout' %}">Checkout</a>
    {% else %}
        <p>Your cart is empty.</p>
    {% endif %}

    <a href="{% url 'homepage' %}">Continue Shopping</a>
{% endblock %}

{% block extra_scripts %}
  <script src="{% static 'store/js/cart.js' %}" defer></script>
{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'store/css/cart.css' %}">
{% endblock %}
